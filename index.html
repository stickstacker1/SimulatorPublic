<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>BUMBERA Terminal – Condensed (Swapped)</title><style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui,-apple-system,Segoe UI,sans-serif;background:#0a0a0a;color:#e0e0e0;overflow:hidden;height:100vh;display:flex;flex-direction:column}
.header{display:flex;align-items:center;gap:24px;height:44px;padding:0 16px;border-bottom:1px solid #222;background:#101010}.logo{font-weight:700;color:#00d4ff}
.nav{display:flex;gap:18px}.nav b,.nav span{font-size:13px;color:#888;cursor:pointer}.nav b{color:#00d4ff}
.right{margin-left:auto;display:flex;gap:12px;align-items:center}.time{font:12px/1 "Courier New",monospace;color:#888}.dot{width:8px;height:8px;border-radius:50%;background:#00ff88}
.ticker{height:32px;border-bottom:1px solid #222;display:flex;align-items:center;overflow:hidden}.marquee{display:flex;gap:24px;padding:0 12px;animation:sc 28s linear infinite}@keyframes sc{to{transform:translateX(-50%)}}
.main{flex:1;display:grid;grid-template-columns:2fr 1fr 1fr;grid-template-rows:2fr 1fr 1fr;gap:1px;background:#222;padding:1px;min-height:0}
.panel{background:#0f0f0f;border:1px solid #222;display:flex;flex-direction:column;min-height:0}.ph{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-bottom:1px solid #333;background:linear-gradient(90deg,#1a1a1a,#141414)}.pt{font-size:12px;color:#00d4ff;text-transform:uppercase}
.pc{flex:1;min-height:0;overflow:auto;padding:10px}.btn{font-size:10px;padding:4px 8px;border:1px solid #444;background:#1a1a1a;color:#aaa;border-radius:3px;cursor:pointer}.btn:hover{border-color:#00d4ff;color:#00d4ff}
.tbl{width:100%;border-collapse:collapse}.tbl th{font-size:11px;color:#888;text-transform:uppercase;border-bottom:1px solid #333;text-align:left;padding:6px}.tbl td{padding:6px;font:12px/1.3 "Courier New",monospace;border-bottom:1px solid rgba(255,255,255,.05)}.pos{color:#00ff88;background:rgba(0,255,136,.06)}.neg{color:#ff3366;background:rgba(255,51,102,.06)}.muted{color:#888;font-size:11px}
.canvas{position:relative;width:100%;height:100%;background:#0a0a0a}.chart{width:100%;height:100%}.ov{position:absolute;top:8px;left:8px;background:rgba(0,0,0,.85);border:1px solid rgba(0,212,255,.3);padding:8px 10px;border-radius:4px}
.split{display:grid;grid-template-columns:1fr 1fr;gap:10px}
</style></head><body>
<div class="header"><div class="logo">BUMBERA</div><div class="nav"><b data-v="markets">MARKETS</b><span data-v="portfolio">PORTFOLIO</span><span data-v="analytics">ANALYTICS</span><span data-v="research">RESEARCH</span><span data-v="trading">TRADING</span><span data-v="risk">RISK</span></div><div class="right"><div class="time" id="t">--</div><div class="dot" id="st"></div></div></div>
<div class="ticker"><div class="marquee" id="mq"><span class="muted">Loading…</span></div></div>
<div class="main">
  <!-- Main Chart (span 2 rows) -->
  <div class="panel" style="grid-row:span 2;">
    <div class="ph"><span class="pt" id="ct">BTC-USD</span><div>
      <button class="btn" data-int="1m">1m</button>
      <button class="btn" data-int="5m">5m</button>
      <button class="btn" data-int="15m">15m</button>
      <button class="btn" data-int="1h">1h</button>
      <button class="btn" data-int="1d">1d</button>
    </div></div>
    <div class="pc" style="padding:0"><div class="canvas"><canvas id="c" class="chart"></canvas><div class="ov"><div id="sym" style="font-weight:700">BTC-USD</div><div id="px" style="font-size:22px">--</div><div id="chg" class="muted">--</div></div></div></div>
  </div>

  <!-- SWAPPED: Top Movers now sits where Order Book was -->
  <div class="panel" id="moversPanel">
    <div class="ph"><span class="pt">Top Gainers & Losers (24h)</span><div><button class="btn" id="mvR">⟲</button> <span id="mvTS" class="muted"></span></div></div>
    <div class="pc"><div class="split">
      <div><div class="muted" style="margin:0 0 6px">Gainers</div><table class="tbl"><thead><tr><th>Symbol</th><th>Price</th><th>Δ</th></tr></thead><tbody id="gain"><tr><td colspan="3" class="muted">Loading…</td></tr></tbody></table></div>
      <div><div class="muted" style="margin:0 0 6px">Losers</div><table class="tbl"><thead><tr><th>Symbol</th><th>Price</th><th>Δ</th></tr></thead><tbody id="loss"><tr><td colspan="3" class="muted">Loading…</td></tr></tbody></table></div>
    </div><div class="muted" style="margin-top:6px">Universe: top 200 by market cap (fallback to Watchlist).</div></div>
  </div>

  <div class="panel"><div class="ph"><span class="pt">Watchlist</span><button class="btn" id="wlR">⟲</button></div><div class="pc"><table class="tbl"><thead><tr><th>Symbol</th><th>Price</th><th>24h %</th></tr></thead><tbody id="wl"><tr><td colspan="3" class="muted">Loading…</td></tr></tbody></table></div></div>
  <div class="panel"><div class="ph"><span class="pt">Portfolio</span></div><div class="pc"><div class="tbl"><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
    <div><div class="muted">Total</div><div id="tot" style="color:#00d4ff;font-weight:700">$100,000</div></div>
    <div><div class="muted">24h P&L</div><div id="pl">$0.00</div><div id="plp" class="muted">0.00%</div></div>
  </div></div></div></div>
  <div class="panel"><div class="ph"><span class="pt">Quick Trade</span></div><div class="pc"><div style="display:grid;gap:8px">
    <select id="symSel"><option value="bitcoin">BTC-USD</option><option value="ethereum">ETH-USD</option><option value="solana">SOL-USD</option><option value="binancecoin">BNB-USD</option></select>
    <input id="amt" type="number" value="1000" min="10" step="10"/>
    <select id="otype"><option value="market">Market</option><option value="limit">Limit</option></select>
    <input id="lpx" type="number" step="0.01" placeholder="Limit Price" style="display:none"/>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px"><button class="btn" id="buy">BUY</button><button class="btn" id="sell">SELL</button></div>
  </div></div></div>

  <!-- SWAPPED: Order Book moved down to where Movers was -->
  <div class="panel" id="orderBookPanel"><div class="ph"><span class="pt">Order Book</span><button class="btn" id="obR">⟲</button></div><div class="pc" id="ob"><span class="muted">Loading…</span></div></div>

  <div class="panel"><div class="ph"><span class="pt">Recent Trades</span></div><div class="pc" id="rt"><div class="muted">Waiting…</div></div></div>
  <div class="panel"><div class="ph"><span class="pt">News</span></div><div class="pc" id="news"><div class="muted">Sample headlines…</div></div></div>
</div>
<script>
const CFG={W:['bitcoin','ethereum','solana','binancecoin','cardano','ripple'],I:{prices:1e4,ob:15e3,ticker:5e3,trades:3e3,news:6e4,movers:6e4},R:2,D:500};
const S={sym:'bitcoin',px:new Map(),chart:[],pos:[],tr:[],timers:{}};
const $=q=>document.querySelector(q),$$=q=>document.querySelectorAll(q);
const fmtN=(n,d=2)=>Number(n).toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d});
const setStat=(id,v,cls)=>{const el=$(id); if(!el)return; el.textContent=v; if(cls) el.className=cls};

// Time
setInterval(()=>{const n=new Date(); const ct=new Intl.DateTimeFormat('en-GB',{timeZone:'America/Chicago',hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'}).format(n); $('#t').textContent=ct+' CST/CDT';},1000);

// Fetch helper
async function jget(u){const P=['','https://corsproxy.io/?']; for(const p of P){for(let i=0;i<CFG.R;i++){try{const r=await fetch(p?p+encodeURIComponent(u):u); if(!r.ok) throw 0; return await r.json();}catch(e){if(i<CFG.R-1) await new Promise(r=>setTimeout(r,CFG.D*(i+1)));}}} return null}

// Prices + chart
async function price(){const u1=`https://api.coingecko.com/api/v3/simple/price?ids=${S.sym}&vs_currencies=usd&include_24hr_change=true`; const u2=`https://api.coincap.io/v2/assets/${S.sym}`; let d=await jget(u1); if(!d||!d[S.sym]){const x=await jget(u2); d=x&&x.data?{[S.sym]:{usd:+x.data.priceUsd,usd_24h_change:+x.data.changePercent24Hr}}:null} if(!d||!d[S.sym]) return; const p=d[S.sym]; S.px.set(S.sym,p); setStat('#px',fmtN(p.usd)); const ch=+(p.usd_24h_change||0); setStat('#chg',`${ch>=0?'+':''}${ch.toFixed(2)}%`,ch>=0?'pos':'neg'); draw();}
function draw(){const c=$('#c'); const ctx=c.getContext('2d'); c.width=c.offsetWidth; c.height=c.offsetHeight; const base=(S.px.get(S.sym)||{usd:40000}).usd; if(!S.chart.length){let b=base; for(let i=0;i<50;i++){const d=(Math.random()-.5)*b*.02, o=b, cl=b+d, h=Math.max(o,cl)+Math.random()*b*.01, l=Math.min(o,cl)-Math.random()*b*.01; S.chart.push({o,h,l,cl}); b=cl;}} ctx.fillStyle='#0a0a0a'; ctx.fillRect(0,0,c.width,c.height); ctx.strokeStyle='rgba(255,255,255,.05)'; for(let x=0;x<c.width;x+=50){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,c.height);ctx.stroke()} for(let y=0;y<c.height;y+=30){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(c.width,y);ctx.stroke()} const w=c.width/S.chart.length; const hi=Math.max(...S.chart.map(k=>k.h)), lo=Math.min(...S.chart.map(k=>k.l)), rng=hi-lo||1; S.chart.forEach((k,i)=>{const x=i*w+w/2, yo=c.height-((k.o-lo)/rng)*c.height*.8, yc=c.height-((k.cl-lo)/rng)*c.height*.8, yh=c.height-((k.h-lo)/rng)*c.height*.8, yl=c.height-((k.l-lo)/rng)*c.height*.8; ctx.strokeStyle=k.cl>=k.o?'#00ff88':'#ff3366'; ctx.beginPath();ctx.moveTo(x,yh);ctx.lineTo(x,yl);ctx.stroke(); ctx.fillStyle=k.cl>=k.o?'#00ff88':'#ff3366'; const bh=Math.abs(yc-yo)||1; ctx.fillRect(x-w*.3,Math.min(yo,yc),w*.6,bh);});}

// Ticker + watchlist
async function ticker(){const ids=CFG.W.join(','), u=`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`; const d=await jget(u); const mq=$('#mq'); mq.innerHTML=''; const data=d||Object.fromEntries(CFG.W.map(x=>[x,{usd:100+Math.random()*900,usd_24h_change:(Math.random()-.5)*10}])); Object.entries(data).forEach(([k,v])=>{const s=k.toUpperCase().slice(0,4), pr=fmtN(v.usd,2), ch=+(v.usd_24h_change||0); const span=document.createElement('span'); span.innerHTML=`<b style="color:#00d4ff">${s}</b> ${pr} <span class="${ch>=0?'pos':'neg'}" style="padding:1px 4px;border-radius:3px">${ch>=0?'+':''}${ch.toFixed(2)}%</span>`; mq.appendChild(span); S.px.set(k,v)}); wl(data)}
function wl(d){const tb=$('#wl'); tb.innerHTML=''; Object.entries(d).forEach(([k,v])=>{const tr=document.createElement('tr'); const ch=+(v.usd_24h_change||0); tr.innerHTML=`<td style="color:#00d4ff;cursor:pointer">${k.toUpperCase().slice(0,4)}</td><td>${fmtN(v.usd,2)}</td><td class="${ch>=0?'pos':'neg'}">${ch>=0?'+':''}${ch.toFixed(2)}%</td>`; tr.firstChild.onclick=()=>{S.sym=k; S.chart=[]; $('#ct').textContent=k.toUpperCase(); $('#sym').textContent=k.toUpperCase(); price()}; tb.appendChild(tr);});}

// Order book (sim)
function ob(){const base=(S.px.get(S.sym)||{usd:40000}).usd; const mk=(p,a)=>({p,a,t:p*a}); const asks=[1,2,3,4,5].map(i=>mk(base+i*base*.0001,Math.random()*2)); const bids=[1,2,3,4,5].map(i=>mk(base-i*base*.0001,Math.random()*2)); const sp=asks[0].p - bids[0].p; const row=x=>`<tr><td>${x.a.toFixed(4)}</td><td>${x.p.toFixed(2)}</td><td>${x.t.toFixed(2)}</td></tr>`; $('#ob').innerHTML=`<table class="tbl"><thead><tr><th>Amount</th><th>Price</th><th>Total</th></tr></thead><tbody>${asks.slice().reverse().map(row).join('')}<tr><td colspan="3" class="muted">Spread: ${sp.toFixed(2)}</td></tr>${bids.map(row).join('')}</tbody></table>`}

// Movers
async function movers(){const u='https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=200&page=1&price_change_percentage=24h'; let d=await jget(u); let rows=Array.isArray(d)?d.map(c=>({s:(c.symbol||'').toUpperCase(),p:+c.current_price,c:+c.price_change_percentage_24h})).filter(x=>Number.isFinite(x.p)&&Number.isFinite(x.c)):null; if(!rows||!rows.length){rows=CFG.W.map(id=>{const v=S.px.get(id)||{usd:0,usd_24h_change:0}; return {s:id.toUpperCase().slice(0,4),p:v.usd||0,c:v.usd_24h_change||0}})} const G=rows.slice().sort((a,b)=>b.c-a.c).slice(0,10); const L=rows.slice().sort((a,b)=>a.c-b.c).slice(0,10); const paint=(id,list)=>{const tb=$(id); tb.innerHTML=list.map(r=>`<tr><td style="color:#00d4ff">${r.s}</td><td>${fmtN(r.p,2)}</td><td class="${r.c>=0?'pos':'neg'}">${r.c>=0?'+':''}${(r.c||0).toFixed(2)}%</td></tr>`).join('')}; paint('#gain',G); paint('#loss',L); $('#mvTS').textContent='Updated '+new Date().toLocaleTimeString();}

// Trades (sim)
function trades(){const base=(S.px.get(S.sym)||{usd:40000}).usd; const t={tm:new Date().toLocaleTimeString(),p:(base+(Math.random()-.5)*base*.001).toFixed(2),a:(Math.random()*2).toFixed(4),sd:Math.random()>.5?'BUY':'SELL'}; const d=document.createElement('div'); d.innerHTML=`<div style="display:flex;justify-content:space-between"><span class="muted">${t.tm}</span><span class="${t.sd==='BUY'?'pos':'neg'}">${t.a} @ ${t.p}</span></div>`; const c=$('#rt'); c.prepend(d); while(c.children.length>10)c.removeChild(c.lastChild)}

// News (stub)
function news(){const N=['BTC holds key support','L2 activity hits records','Fed notes progress on CBDC']; $('#news').innerHTML=N.map((x,i)=>`<div style="padding:6px;border-bottom:1px solid rgba(255,255,255,.05)"><div class="muted">${i?i*5+' min ago':'Just now'}</div><div>${x}</div></div>`).join('')}

// Events
$$('[data-int]').forEach(b=>b.onclick=()=>{S.chart=[]; draw()}); $('#obR').onclick=ob; $('#wlR').onclick=ticker; $('#mvR').onclick=movers; $('#otype').onchange=e=>$('#lpx').style.display=e.target.value==='limit'?'block':'none'; $('#buy').onclick=()=>toast('BUY order sent'); $('#sell').onclick=()=>toast('SELL order sent'); $('#symSel').onchange=e=>{S.sym=e.target.value; S.chart=[]; $('#ct').textContent=e.target.options[e.target.selectedIndex].text; $('#sym').textContent=e.target.options[e.target.selectedIndex].text; price(); ob();};

// Toast
function toast(m){const d=document.createElement('div'); d.style.cssText='position:fixed;right:16px;bottom:16px;padding:10px 14px;border-radius:4px;border:1px solid rgba(0,255,136,.3);color:#00ff88;background:rgba(0,255,136,.08);z-index:999'; d.textContent=m; document.body.appendChild(d); setTimeout(()=>d.remove(),2200)}

// Boot
(async()=>{await ticker(); await price(); ob(); movers(); news(); S.timers.p=setInterval(price,CFG.I.prices); S.timers.t=setInterval(ticker,CFG.I.ticker); S.timers.o=setInterval(ob,CFG.I.ob); S.timers.m=setInterval(movers,CFG.I.movers); S.timers.r=setInterval(trades,CFG.I.trades); S.timers.n=setInterval(news,CFG.I.news);})();
</script>
</body></html>
